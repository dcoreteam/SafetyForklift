<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Shift Log</title>
    <style>
      table {
        border-collapse: collapse;
        width: 80%;
        margin: 0 auto;
      }
      th, td {
        border: 1px solid #ccc;
        padding: 8px;
        text-align: center;
      }
      th {
        background-color: #f2f2f2;
      }
      h1 {
        text-align: center;
      }
    </style>
  </head>
  <body>
    <h1>Shift Log</h1>
    <% 
      function formatDateTime(dateString) {
        if (!dateString) return ''; // กรณีไม่มีข้อมูล

        const d = new Date(dateString);
        const year = d.getFullYear();
        const month = String(d.getMonth() + 1).padStart(2, '0');
        const day = String(d.getDate()).padStart(2, '0');
        const hours = String(d.getHours()).padStart(2, '0');
        const minutes = String(d.getMinutes()).padStart(2, '0');
        const seconds = String(d.getSeconds()).padStart(2, '0');

        return `${year}-${month}-${day} ${hours}:${minutes}:${seconds}`;
      }
    %>
    <table>
      <tr>
        <th>ID</th>
        <th>Staff ID</th>
        <th>Card ID</th>
        <th>Fleet ID</th>
        <th>Check In</th>
        <th>Check Out</th>
      </tr>
      <% shifts.forEach(shift => { %>
      <tr>
        <td><%= shift.id %></td>
        <td><%= shift.staff_id %></td>
        <td><%= shift.card_id %></td>
        <td><%= shift.fleet_id %></td>
        <td><%= formatDateTime(shift.check_in) %></td>
        <td><%= formatDateTime(shift.check_out) %></td>
      </tr>
      <% }) %>
    </table>
  </body>
</html>
